{"version":3,"sources":["webpack:///E:/GLH/uni-app/xzsst-mp/main.js","webpack:///E:/GLH/uni-app/xzsst-mp/pages/write/write.vue?a8fc","webpack:///E:/GLH/uni-app/xzsst-mp/pages/write/write.vue?208c","webpack:///E:/GLH/uni-app/xzsst-mp/pages/write/write.vue?12b3","webpack:///E:/GLH/uni-app/xzsst-mp/pages/write/write.vue?76a9","webpack:///E:/GLH/uni-app/xzsst-mp/pages/write/write.vue","webpack:///E:/GLH/uni-app/xzsst-mp/pages/write/write.vue?d5ce","webpack:///E:/GLH/uni-app/xzsst-mp/pages/write/write.vue?4e0c"],"names":["createPage","Page","sourceType","sizeType","components","data","myId","userState","publishNum","contents","imageList","sourceTypeIndex","sizeTypeIndex","countIndex","count","pickIndex","pickList","name","postClassId","localId","checked","canvasShow","canvasW","canvasH","fileUrl","imgTips","onUnload","onLoad","userInfo","uni","getStorageSync","objectId","reLaunch","url","that","getPostClassList","getStorage","key","success","res","getTodayPublishPostNum","checkStatus","onShow","setStorage","console","log","onShareAppMessage","title","path","methods","navTo","navigateTo","query","Bmob","Query","get","then","state","catch","err","equalTo","date","Date","yy","getFullYear","mm","getMonth","dd","getDate","time_start","time_end","showLoading","find","hideLoading","concat","publish","flag","tips","length","showToast","icon","duration","checkMsg","mask","currentUser","User","current","pointer","Pointer","poiID","set","pointerPostClass","pPostClassID","pointerLocal","pLocalID","save","showModal","content","confirmText","cancelText","confirm","cancel","code","error","drawCanvas","index","failNum","tempFilePaths","getImageInfo","src","ctx","createCanvasContext","originWidth","width","originHeight","height","maxWidth","maxHeight","targetWidth","targetHeight","Math","round","drawImage","draw","canvasToTempFilePath","canvasId","quality","tempFilePath","uploadFile","filePath","fileType","resp","JSON","parse","results","push","fail","errMsg","showCancel","complete","getCanvasImg","inedx","clearRect","chooseImage","isFullImg","isContinue","file","item","File","forEach","val","deleteImg","splice","Promise","e","previewImage","urls","checkPermission","type","permision","isIOS","requestIOS","requestAndroid","status","gotoAppSetting","bindPickerChange","target","value","parseInt"],"mappings":"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","file":"pages/write/write.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/write/write.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./write.vue?vue&type=template&id=6cf4b1cc&\"\nimport script from \"./write.vue?vue&type=script&lang=js&\"\nexport * from \"./write.vue?vue&type=script&lang=js&\"\nimport style0 from \"./write.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\GLH\\\\software\\\\HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6cf4b1cc', component.options)\n    } else {\n      api.reload('6cf4b1cc', component.options)\n    }\n    module.hot.accept(\"./write.vue?vue&type=template&id=6cf4b1cc&\", function () {\n      api.rerender('6cf4b1cc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"uni-app/xzsst-mp/pages/write/write.vue\"\nexport default component.exports","export * from \"-!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=template&id=6cf4b1cc&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.checked = !_vm.checked\n    }\n  }\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\nvar sourceType = [\n    ['camera'],\n    ['album'],\n    ['camera', 'album']\n]\nvar sizeType = [\n    ['compressed'],\n    ['original'],\n    ['compressed', 'original']\n]\nexport default {\n\tcomponents: {\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmyId: '',\t// 当前用户id\n\t\t\tuserState: 0,\t// 用户状态 0-正常 1-禁言\n\t\t\tpublishNum: 0,\t// 今日发帖量\n\t\t\tcontents: '',\t// 文本内容\n\t\t\timageList: [],\n\t\t\tsourceTypeIndex: 2,\n\t\t\tsourceType: ['拍照', '相册', '拍照或相册'],\n\t\t\tsizeTypeIndex: 2,\n\t\t\tsizeType: ['压缩', '原图', '压缩或原图'],\n\t\t\tcountIndex: 8,\n\t\t\tcount: [1, 2, 3, 4, 5, 6, 7, 8, 9],\n\t\t\tpickIndex: 0,\n\t\t\tpickList: [{name: '不限'}],\n\t\t\tpostClassId: '',\t// 帖子分类的id， 默认为空\n\t\t\tlocalId: '',\t// 地址分类的id， 默认为空\n\t\t\tchecked: true,\n\t\t\tcanvasShow: false, // 画布\n\t\t\tcanvasW: 0,\t// 画布 宽\n\t\t\tcanvasH: 0,\t// 画布 高\n\t\t\t// fileUrl: 'https://bmob-cdn-27154.bmobcloud.com/',\t// 文件地址\n\t\t\tfileUrl: 'https://bmob-cdn-27154.bmobpay.com',\t// 文件地址\n\t\t\timgTips: '',\t// 图片提示\n\t\t}\n\t},\n\t// 监听页面卸载， 监听页面的卸载， 当前处于A页面，点击返回按钮时，则将是A页面卸载、\n\tonUnload() {\n\t    this.imageList = [],\n\t\tthis.sourceTypeIndex = 2,\n\t\tthis.sourceType = ['拍照', '相册', '拍照或相册'],\n\t\tthis.sizeTypeIndex = 2,\n\t\tthis.sizeType = ['压缩', '原图', '压缩或原图'],\n\t\tthis.countIndex = 8;\n\t},\n\tonLoad(){\n\t\tlet userInfo = uni.getStorageSync('userInfo') || '';\n\t\tif(!userInfo.objectId){\n\t\t\tuni.reLaunch({\n\t\t\t\turl: '/pages/authorize/authorize'\n\t\t\t});\n\t\t\treturn\n\t\t}\n\t\tlet that = this;\n\t\tthis.getPostClassList();\n\t\t//\t获取地址\n\t\tuni.getStorage({\n\t\t    key: 'localId',\n\t\t    success: function (res) {\n\t\t\t\tthat.localId = res.data ? res.data : ''; \n\t\t    }\n\t\t});\n\t\t// 获取用户\n\t\tuni.getStorage({\n\t\t\tkey: 'userInfo',\n\t\t\tsuccess: function (res) {\n\t\t\t\tthat.myId = res.data.objectId;\n\t\t\t\tthat.getTodayPublishPostNum()\n\t\t\t\tthat.checkStatus();\n\t\t\t}\n\t\t});\n\t},\n\t// 监听页面的隐藏,当从当前A页跳转到其他页面，那么A页面处于隐藏状态。\n\tonShow(){\n\t\tuni.setStorage({\n\t\t  key: 'reloadZone',\n\t\t  data: true,\n\t\t  success: function () {\n\t\t\tconsole.log('更新刷新主页状态: 更新')\n\t\t  }\n\t\t});\n\t\tthis.getTodayPublishPostNum()\n\t\tthis.checkStatus();\n\t},\n\t// 分享\n\tonShareAppMessage() {\n\t\treturn {\n\t\t\ttitle: '邀请您使用小镇事事通',\n\t\t\tpath: '/pages/write/write'\n\t\t}\n\t},\n\tmethods: {\n\t\tnavTo(url){\n\t\t\tuni.navigateTo({ url: url })\n\t\t},\n\t\t// 获取用户发言状态\n\t\tcheckStatus(){\n\t\t\tlet that = this;\n\t\t\t// 查询大于某个日期的数据，示例代码如下\n\t\t\tconst query = that.Bmob.Query(\"_User\");\n\t\t\tquery.get(that.myId).then(res => {\n\t\t\t  that.userState = res.state\n\t\t\t}).catch(err => {\n\t\t\t  console.log(err)\n\t\t\t})\n\t\t},\n\t\t// 获取今日发帖数量\n\t\tgetTodayPublishPostNum(){\n\t\t\tlet that = this;\n\t\t\t// 查询大于某个日期的数据，示例代码如下\n\t\t\tconst query = that.Bmob.Query(\"postList\");\n\t\t\t// 如果要查询某个属性等于某个值，示例代码如下：\n\t\t\tquery.equalTo(\"author\", \"==\", that.myId);\n\t\t\tvar date = new Date();\n\t\t\tvar yy = date .getFullYear(); //获取完整的年份(4位)\n\t\t\tvar mm = date .getMonth() + 1 < 10 ? '0' + date .getMonth() + 1  : date .getMonth() + 1  ; //获取当前月份(0-11,0代表1月)\n\t\t\tvar dd = date .getDate() < 10 ? '0' + date .getDate() : date .getDate() ; //获取当前日(1-31)\n\t\t\tvar time_start = yy + '-' + mm + '-' + dd + ' 00:00:00'\n\t\t\tvar time_end = yy + '-' + mm + '-' + dd + ' 23:59:59'\n\t\t\tquery.equalTo(\"createdAt\", \">\", time_start);\n\t\t\tquery.equalTo(\"createdAt\", \"<\", time_end);\n\t\t\tquery.count().then(res => {\n\t\t\t  that.publishNum = res.count;\n\t\t\t});\n\t\t},\n\t\t// 获取分类列表\n\t\tgetPostClassList(){\n\t\t\tlet that = this;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '加载中'\n\t\t\t});\n\t\t\tvar query = that.Bmob.Query('postClass');\n\t\t\t// 查询所有数据\n\t\t\tquery.find().then(res => {\n\t\t\t    uni.hideLoading();\n\t\t\t    that.pickList = that.pickList.concat(res);\n\t\t\t});\n\t\t},\n\t\t// 用户发帖--内容和图片, 将该帖子关联该用户\n\t\tpublish(){\n\t\t\tlet that = this;\n\t\t\tlet flag = true;\n\t\t\tlet tips = '';\n\t\t\tif(this.contents.length < 15){\n\t\t\t\tflag = false;\n\t\t\t\ttips = '内容长度不低于15个字符';\n\t\t\t}\n\t\t\tif(this.contents.length > 150){\n\t\t\t\tflag = false;\n\t\t\t\ttips = '内容长度不得超过150个字符';\n\t\t\t}\n\t\t\tif(that.publishNum > 5){\n\t\t\t\tflag = false;\n\t\t\t\ttips = '为防止恶意刷屏，每人每天最多发帖5篇';\n\t\t\t}\n\t\t\tif(that.userState === 1){\n\t\t\t\tflag = false;\n\t\t\t\ttips = '由于违反相关法律法规，您已被禁言，如有疑问，可找客服申诉';\n\t\t\t}\n\t\t\tif(!flag){\n\t\t\t\tuni.showToast({\n\t\t\t\t    title: tips,\n\t\t\t\t    icon: 'none',\n\t\t\t\t\tduration: 3000\n\t\t\t\t});\n\t\t\t\treturn \n\t\t\t}\n\t\t\tthat.Bmob.checkMsg(that.contents).then(res => {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '加载中',\n\t\t\t\t\tmask: true,\n\t\t\t\t});\n\t\t\t\tvar currentUser = that.Bmob.User.current(); // 当前用户\n\t\t\t\tvar objectId = currentUser.objectId; // 当前用户Id\n\t\t\t\t// Pointer 类型在数据库是一个json数据类型，只需调用Pointer方法创建一个Pointer对象存入到字段中，如下：\n\t\t\t\tconst pointer = that.Bmob.Pointer('_User')\n\t\t\t\tconst poiID = pointer.set(objectId)\n\t\t\t\tvar query = that.Bmob.Query('postList');\n\t\t\t\t\n\t\t\t\tquery.set('author',poiID)\n\t\t\t\tquery.set(\"contents\", that.contents)\n\t\t\t\tquery.set(\"view\", 0)\n\t\t\t\tquery.set(\"likes\", 0)\n\t\t\t\tquery.set(\"comments\", 0)\n\t\t\t\tquery.set(\"images\", that.imageList)\n\t\t\t\t\n\t\t\t\t// 关联分类表\n\t\t\t\tif(that.postClassId){\n\t\t\t\t\tconst pointerPostClass = that.Bmob.Pointer('postClass')\n\t\t\t\t\tconst pPostClassID = pointerPostClass.set(that.postClassId)\n\t\t\t\t\tquery.set('belongsClass',pPostClassID)\t// 绑定的帖子分类id\n\t\t\t\t}\n\t\t\t\t// 关联地区表\n\t\t\t\tif(that.localId){\n\t\t\t\t\tconst pointerLocal = that.Bmob.Pointer('local')\n\t\t\t\t\tconst pLocalID = pointerLocal.set(that.localId)\n\t\t\t\t\tquery.set('belongsLocal',pLocalID)\t// 绑定的帖子分类id\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tquery.save().then(res => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tthat.getTodayPublishPostNum();\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '发表成功',\n\t\t\t\t\t\tcontent: '是否立即前往查看',\n\t\t\t\t\t\tconfirmText: '前往查看',\n\t\t\t\t\t\tcancelText: '继续发帖',\n\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t    url: '/pages/index/index'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\t\tthat.contents = '';\t// 文本内容\n\t\t\t\t\t\t\t\tthat.imageList = [];\n\t\t\t\t\t\t\t\tthat.pickIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t}).catch(err => {\n\t\t\t\tlet tips = '错误类型：' + err.code + '，' + err.error;\n\t\t\t\tif(err.code === 10007){\n\t\t\t\t\ttips = '输入内容含有敏感词，请文明用语'\n\t\t\t\t}\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: tips,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t// 绘制图片到canvas上\n\t\tdrawCanvas (index, failNum, tempFilePaths) {\n\t\t\tvar that = this;\n\t\t\tif (index < tempFilePaths.length) {\n\t\t\t\t// 循环绘制canvas, canvas中使用定时器\n\t\t\t\tuni.getImageInfo({//获取图片信息\n\t\t\t\t    src: tempFilePaths[index],\n\t\t\t\t    success:function(res){\n\t\t\t\t\t\t//---------利用canvas压缩图片--------------\n\t\t\t\t\t\tconst ctx = uni.createCanvasContext('myCanvas'); //创建画布\n\t\t\t\t\t\t// 图片原始尺寸\n\t\t\t\t\t\tvar originWidth = res.width;\n\t\t\t\t\t\tvar originHeight = res.height;\n\t\t\t\t\t\t// 最大尺寸限制，可通过国设置宽高来实现图片压缩程度\n\t\t\t\t\t\tvar maxWidth = 400,\n\t\t\t\t\t\t\tmaxHeight = 400;\n\t\t\t\t\t\t// 目标尺寸\n\t\t\t\t\t\tvar targetWidth = originWidth,\n\t\t\t\t\t\t\ttargetHeight = originHeight;\n\t\t\t\t\t\t// 图片尺寸超过400x400的限制\n\t\t\t\t\t\tif(originWidth > maxWidth || originHeight > maxHeight) {\n\t\t\t\t\t\t\tif(originWidth / originHeight > maxWidth / maxHeight) {\n\t\t\t\t\t\t\t\t// 更宽，按照宽度限定尺寸\n\t\t\t\t\t\t\t\ttargetWidth = maxWidth;\n\t\t\t\t\t\t\t\ttargetHeight = Math.round(maxWidth * (originHeight / originWidth));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttargetHeight = maxHeight;\n\t\t\t\t\t\t\t\ttargetWidth = Math.round(maxHeight * (originWidth / originHeight));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// canvas对图片进行缩放\n\t\t\t\t\t\tthat.canvasH = targetHeight\n\t\t\t\t\t\tthat.canvasW = targetWidth\n\t\t\t\t\t\t// 图片压缩\n\t\t\t\t\t\tctx.drawImage(tempFilePaths[index], 0, 0, targetWidth, targetHeight); //画布中展示图片大小\n\t\t\t\t\t\tuni.showLoading( { title:\"图片处理中\", mask: true }) //运行压缩输出文字（显示loading\t\t\t\t\t\n\t\t\t\t\t\tctx.draw(false, function () {\n\t\t\t\t\t\t\tindex = index + 1;//上传成功的数量，上传成功则加1\n\t\t\t\t\t\t\tuni.canvasToTempFilePath({ //把当前画布指定区域的内容导出生成指定大小图片，并返回文件路径\n\t\t\t\t\t\t\t\tcanvasId: \"myCanvas\", //画布id\n\t\t\t\t\t\t\t\tquality: 0.5, //图片质量，取值范围在（0，1】\n\t\t\t\t\t\t\t\tsuccess:function(data){\n\t\t\t\t\t\t\t\t\tconsole.log('给后台传输这个地址:' + data.tempFilePath)//给后台传输这个地址\n\t\t\t\t\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\t\t\t\t\t// url: that.fileUrl + '/weiliao/skill/file/upload',\n\t\t\t\t\t\t\t\t\t\turl: that.fileUrl,\n\t\t\t\t\t\t\t\t\t\tfilePath: data.tempFilePath,\n\t\t\t\t\t\t\t\t\t\tfileType: 'image',\n\t\t\t\t\t\t\t\t\t\tname: 'uploadFile',\t// 后台 参数名\n\t\t\t\t\t\t\t\t\t\tsuccess: (data) => {\n\t\t\t\t\t\t\t\t\t\t\tlet resp = JSON.parse(data.data)\n\t\t\t\t\t\t\t\t\t\t\tif(resp.code === 200 && resp.results){\n\t\t\t\t\t\t\t\t\t\t\t\tthat.imageList.push(that.fileUrl + resp.results);\n\t\t\t\t\t\t\t\t\t\t\t\tthat.drawCanvas(index, failNum, tempFilePaths);\n\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast( { title: \"图片上传失败，请尝试单独上传\", icon: 'none' }) \n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: err.errMsg,\n\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\t\t\t\t    uni.hideLoading()//隐藏loading\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},fail: (err) => {\n\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t\tfailNum += 1;//失败数量，可以用来提示用户\n\t\t\t\t\t\t\t\t\tthat.getCanvasImg(inedx, failNum, tempFilePaths);\n\t\t\t\t\t\t\t\t},complete: () => {\n\t\t\t\t\t\t\t\t\tif(index === tempFilePaths.length ){\n\t\t\t\t\t\t\t\t\t\t// 清除画布\n\t\t\t\t\t\t\t\t\t\tthat.canvasH = 1\n\t\t\t\t\t\t\t\t\t\tthat.canvasW = 1\n\t\t\t\t\t\t\t\t\t\tctx.clearRect(0, 0, 0, 0);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tchooseImage: async function() {\n\t\t\tlet that = this;\n\t\t\tlet flag = true;\n\t\t\tlet tips = ''\n\t\t\tif(that.publishNum > 5){\n\t\t\t\ttips = '为防止恶意刷屏，每人每天最多发帖5篇';\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif(that.userState === 1){\n\t\t\t\ttips = '由于违反相关法律法规，您已被禁言，如有疑问，可找客服申诉';\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif(!flag){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: tips,\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 3000\n\t\t\t\t}) \n\t\t\t\treturn\n\t\t\t}\n\n\n\n\n\n\n\n\n\n\t\t\n\t\t    if (this.imageList.length === 9) {\n\t\t        let isContinue = await this.isFullImg();\n\t\t        console.log(\"是否继续?\", isContinue);\n\t\t        if (!isContinue) {\n\t\t            return;\n\t\t        }\n\t\t    }\n\t\t\tuni.chooseImage({\n\t\t\t  success: function (res) {\n\t\t\t\tvar tempFilePaths = res.tempFilePaths\n\t\t\t\tvar file;\n\t\t\t\tfor (let item of tempFilePaths) {\n\t\t\t\t  console.log('itemn',item)\n\t\t\t\t  file = that.Bmob.File('abc.jpg', item);\n\t\t\t\t}\n\t\t\t\tfile.save().then(res => {\n\t\t\t\t\tres.forEach( (val)=> {\n\t\t\t\t\t\tthat.imageList.push(val.url)\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t  }\n\t\t\t})\n\t\t  //   uni.chooseImage({\n\t\t  //       sourceType: sourceType[this.sourceTypeIndex],\n\t\t\t\t// sizeType: ['origin','compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t  //       count: this.imageList.length + this.count[this.countIndex] > 9 ? 9 - this.imageList.length :\n\t\t  //           this.count[this.countIndex],\n\t\t  //       success: (res) => {\n\t\t\t\t// \t//图片大小，如果大于5M，提示用户\n\t\t\t\t// \tlet size = 0;\n\t\t\t\t// \tthat.imgTips = '';\n\t\t\t\t// \tfor (var i = 0; i < res.tempFiles.length; i++) {\n\t\t\t\t// \t\tsize += res.tempFiles[i].size\n\t\t\t\t// \t}\n\t\t\t\t// \tif (size >= 5 * 1024 * 1024) {\n\t\t\t\t// \t\tuni.showToast({\n\t\t\t\t// \t\t\ttitle: '文件大，需要处理时间较长',\n\t\t\t\t// \t\t\ticon: 'none'\n\t\t\t\t// \t\t}) \n\t\t\t\t// \t}\n\t\t\t\t// \tsetTimeout( ()=> { \n\t\t\t\t// \t\tthat.drawCanvas(0, 0, res.tempFilePaths);  //进行压缩\n\t\t\t\t// \t}, 5)\n\t\t\t\t\t\n\t\t  //       },\n\t\t  //       fail: (err) => {\n\t\t  //\n\n\n\n\n\t\t  //       }\n\t\t  //   })\n\t\t},\n\t\tdeleteImg(index){\n\t\t\tthis.imageList.splice( index, 1)\n\t\t},\n\t\tisFullImg: function() {\n\t\t    return new Promise((res) => {\n\t\t        uni.showModal({\n\t\t            content: \"已经有9张图片了,是否清空现有图片？\",\n\t\t            success: (e) => {\n\t\t                if (e.confirm) {\n\t\t                    this.imageList = [];\n\t\t                    res(true);\n\t\t                } else {\n\t\t                    res(false)\n\t\t                }\n\t\t            },\n\t\t            fail: () => {\n\t\t                res(false)\n\t\t            }\n\t\t        })\n\t\t    })\n\t\t},\n\t\tpreviewImage: function(index) {\n\t\t    uni.previewImage({\n\t\t        current: this.imageList[index],\n\t\t        urls: this.imageList\n\t\t    })\n\t\t},\n\t\tasync checkPermission(code) {\n\t\t    let type = code ? code - 1 : this.sourceTypeIndex;\n\t\t    let status = permision.isIOS ? await permision.requestIOS(sourceType[type][0]) :\n\t\t        await permision.requestAndroid(type === 0 ? 'android.permission.CAMERA' :\n\t\t            'android.permission.READ_EXTERNAL_STORAGE');\n\t\t\n\t\t    if (status === null || status === 1) {\n\t\t        status = 1;\n\t\t    } else {\n\t\t        uni.showModal({\n\t\t            content: \"没有开启权限\",\n\t\t            confirmText: \"设置\",\n\t\t            success: function(res) {\n\t\t                if (res.confirm) {\n\t\t                    permision.gotoAppSetting();\n\t\t                }\n\t\t            }\n\t\t        })\n\t\t    }\n\t\t    return status;\n\t\t},\n\t\t// 切换pick分类选择\n\t\tbindPickerChange: function(e) {\n\t\t\tthis.pickIndex = e.target.value\n\t\t\tthis.postClassId = this.pickList[parseInt(this.pickIndex)].objectId ? this.pickList[parseInt(this.pickIndex)].objectId : ''\n\t\t},\n\t},\n\t// watch: {\n\t// \tcolumnsNum(value) {\n\t// \t    this.set({\n\t// \t        displayColumns: this.data.columns.slice(0, +value)\n\t// \t    });\n\t// \t}\n\t// }\n}\n","import mod from \"-!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../software/HBuilderX.2.1.3.20190723.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}